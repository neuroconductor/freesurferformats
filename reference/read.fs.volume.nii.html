<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Turn a 3D or 4D `oro.nifti` instance into an `fs.volume` instance with complete header. — read.fs.volume.nii • freesurferformats</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Turn a 3D or 4D `oro.nifti` instance into an `fs.volume` instance with complete header. — read.fs.volume.nii" />
<meta property="og:description" content="This is work in progress. This function takes an `oro.nifti` instance and computes the MGH header fields from the NIFTI header data, allowing for proper orientation of the contained image data (see mghheader.vox2ras and related functions). Currently only few datatypes are supported, and the `sform` header field needs to be present in the NIFTI instance." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">freesurferformats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.13</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/freesurferformats.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/freesurferformats_header.html">Computing volume header data with freesurferformats</a>
    </li>
    <li>
      <a href="../articles/freesurferformats_write.html">Writing FreeSurfer neuroimaging data with freesurferformats</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dfsp-spirit/freesurferformats/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Turn a 3D or 4D `oro.nifti` instance into an `fs.volume` instance with complete header.</h1>
    <small class="dont-index">Source: <a href='https://github.com/dfsp-spirit/freesurferformats/blob/master/R/nifti_to_mgh.R'><code>R/nifti_to_mgh.R</code></a></small>
    <div class="hidden name"><code>read.fs.volume.nii.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is work in progress. This function takes an `oro.nifti` instance and computes the MGH header fields from the NIFTI header data, allowing for proper orientation of the contained image data (see <code><a href='mghheader.vox2ras.html'>mghheader.vox2ras</a></code> and related functions). Currently only few datatypes are supported, and the `sform` header field needs to be present in the NIFTI instance.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>read.fs.volume.nii</span><span class='op'>(</span>
  <span class='va'>filepath</span>,
  flatten <span class='op'>=</span> <span class='cn'>FALSE</span>,
  with_header <span class='op'>=</span> <span class='cn'>FALSE</span>,
  drop_empty_dims <span class='op'>=</span> <span class='cn'>FALSE</span>,
  do_rotate <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>filepath</th>
      <td><p>instance of class `nifti` from the `oro.nifti` package, or a path to a NIFTI file as a character string.</p></td>
    </tr>
    <tr>
      <th>flatten</th>
      <td><p>logical. Whether to flatten the return volume to a 1D vector. Useful if you know that this file contains 1D morphometry data.</p></td>
    </tr>
    <tr>
      <th>with_header</th>
      <td><p>logical. Whether to return the header as well. If TRUE, return an instance of class `fs.volume` for data with at least 3 dimensions, a named list with entries "data" and "header". The latter is another named list which contains the header data. These header entries exist: "dtype": int, one of: 0=MRI_UCHAR; 1=MRI_INT; 3=MRI_FLOAT; 4=MRI_SHORT. "voldim": integer vector. The volume (=data) dimensions. E.g., c(256, 256, 256, 1). These header entries may exist: "vox2ras_matrix" (exists if "ras_good_flag" is 1), "mr_params" (exists if "has_mr_params" is 1). See the `mghheader.*` functions, like <code><a href='mghheader.vox2ras.tkreg.html'>mghheader.vox2ras.tkreg</a></code>, to compute more information from the header fields.</p></td>
    </tr>
    <tr>
      <th>drop_empty_dims</th>
      <td><p>logical, whether to drop empty dimensions of the returned data</p></td>
    </tr>
    <tr>
      <th>do_rotate</th>
      <td><p>logical, whether to rotate 3D volumes to compensate for storage order. WIP.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>extra parameters passed to <code><a href='https://rdrr.io/pkg/oro.nifti/man/read_nifti.html'>oro.nifti::readNIfTI</a></code>. Leave this alone unless you know what you are doing.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an `fs.volume` instance. The `header` fields are computed from the NIFTI header. The `data` array is rotated into FreeSurfer storage order, but otherwise returned as present in the input NIFTI instance, i.e., no values are changed in any way.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>This is not supposed to be used to read 1D morphometry data from NIFTI files generated by FreeSurfer (e.g., by converting `lh.thickness` to NIFTI using `mri_convert`): the FreeSurfer NIFTI hack is not supported by oro.nifti.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='https://nifti.nimh.nih.gov/nifti-1/'>NIfTI-1 data format spec</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/oro.nifti/man/read_nifti.html'>oro.nifti::readNIfTI</a></code>, <code><a href='read.fs.mgh.html'>read.fs.mgh</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>   <span class='va'>base_file</span> <span class='op'>=</span> <span class='st'>"~/data/subject1_only/subject1/mri/brain"</span>;  <span class='co'># missing file ext.</span></span>
<span class='r-in'>   <span class='va'>mgh_file</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>base_file</span>, <span class='st'>'.mgz'</span>, sep<span class='op'>=</span><span class='st'>''</span><span class='op'>)</span>;  <span class='co'># the standard MGH/MGZ file</span></span>
<span class='r-in'>   <span class='va'>nii_file</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>base_file</span>, <span class='st'>'.nii'</span>, sep<span class='op'>=</span><span class='st'>''</span><span class='op'>)</span>;   <span class='co'># NIFTI file generated with mri_convert</span></span>
<span class='r-in'>   <span class='va'>brain_mgh</span> <span class='op'>=</span> <span class='fu'><a href='read.fs.mgh.html'>read.fs.mgh</a></span><span class='op'>(</span><span class='va'>mgh_file</span>, with_header <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>;</span>
<span class='r-in'>   <span class='va'>brain_nii</span> <span class='op'>=</span> <span class='fu'>read.fs.volume.nii</span><span class='op'>(</span><span class='va'>nii_file</span>, with_header <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>;</span>
<span class='r-in'></span>
<span class='r-in'>   <span class='fu'><a href='https://rdrr.io/r/base/all.html'>all</a></span><span class='op'>(</span><span class='va'>brain_nii</span><span class='op'>$</span><span class='va'>data</span> <span class='op'>==</span> <span class='va'>brain_mgh</span><span class='op'>$</span><span class='va'>data</span><span class='op'>)</span>;                              <span class='co'># output: TRUE</span></span>
<span class='r-in'>   <span class='fu'><a href='https://rdrr.io/r/base/all.html'>all</a></span><span class='op'>(</span><span class='fu'><a href='mghheader.vox2ras.html'>mghheader.vox2ras</a></span><span class='op'>(</span><span class='va'>brain_nii</span><span class='op'>)</span> <span class='op'>==</span> <span class='fu'><a href='mghheader.vox2ras.html'>mghheader.vox2ras</a></span><span class='op'>(</span><span class='va'>brain_mgh</span><span class='op'>)</span><span class='op'>)</span>   <span class='co'># output: TRUE</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Tim Sch<c3><a4>fer.</a4></c3></p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


