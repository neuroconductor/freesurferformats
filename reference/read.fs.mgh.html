<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read file in FreeSurfer MGH or MGZ format — read.fs.mgh • freesurferformats</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read file in FreeSurfer MGH or MGZ format — read.fs.mgh" />
<meta property="og:description" content="Read multi-dimensional brain imaging data from a file in FreeSurfer binary MGH or MGZ format. The MGZ format is just a gzipped version of the MGH format. For a subject (MRI image pre-processed with FreeSurfer) named 'bert', an example file would be 'bert/mri/T1.mgz', which contains a 3D brain scan of bert." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">freesurferformats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.13</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/freesurferformats.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/freesurferformats_header.html">Computing volume header data with freesurferformats</a>
    </li>
    <li>
      <a href="../articles/freesurferformats_write.html">Writing FreeSurfer neuroimaging data with freesurferformats</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dfsp-spirit/freesurferformats/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read file in FreeSurfer MGH or MGZ format</h1>
    <small class="dont-index">Source: <a href='https://github.com/dfsp-spirit/freesurferformats/blob/master/R/read_fs_mgh.R'><code>R/read_fs_mgh.R</code></a></small>
    <div class="hidden name"><code>read.fs.mgh.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read multi-dimensional brain imaging data from a file in FreeSurfer binary MGH or MGZ format. The MGZ format is just a gzipped version of the MGH format. For a subject (MRI image pre-processed with FreeSurfer) named 'bert', an example file would be 'bert/mri/T1.mgz', which contains a 3D brain scan of bert.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>read.fs.mgh</span><span class='op'>(</span>
  <span class='va'>filepath</span>,
  is_gzipped <span class='op'>=</span> <span class='st'>"AUTO"</span>,
  flatten <span class='op'>=</span> <span class='cn'>FALSE</span>,
  with_header <span class='op'>=</span> <span class='cn'>FALSE</span>,
  drop_empty_dims <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>filepath</th>
      <td><p>string. Full path to the input MGZ or MGH file.</p></td>
    </tr>
    <tr>
      <th>is_gzipped</th>
      <td><p>a logical value or the string 'AUTO'. Whether to treat the input file as gzipped, i.e., MGZ instead of MGH format. Defaults to 'AUTO', which tries to determine this from the last three characters of the 'filepath' parameter. Files with extensions 'mgz' and '.gz' (in arbitrary case) are treated as MGZ format, all other files are treated as MGH. In the special case that 'filepath' has less than three characters, MGH is assumed.</p></td>
    </tr>
    <tr>
      <th>flatten</th>
      <td><p>logical. Whether to flatten the return volume to a 1D vector. Useful if you know that this file contains 1D morphometry data.</p></td>
    </tr>
    <tr>
      <th>with_header</th>
      <td><p>logical. Whether to return the header as well. If TRUE, return an instance of class `fs.volume` for data with at least 3 dimensions, a named list with entries "data" and "header". The latter is another named list which contains the header data. These header entries exist: "dtype": int, one of: 0=MRI_UCHAR; 1=MRI_INT; 3=MRI_FLOAT; 4=MRI_SHORT. "voldim": integer vector. The volume (=data) dimensions. E.g., c(256, 256, 256, 1). These header entries may exist: "vox2ras_matrix" (exists if "ras_good_flag" is 1), "mr_params" (exists if "has_mr_params" is 1). See the `mghheader.*` functions, like <code><a href='mghheader.vox2ras.tkreg.html'>mghheader.vox2ras.tkreg</a></code>, to compute more information from the header fields.</p></td>
    </tr>
    <tr>
      <th>drop_empty_dims</th>
      <td><p>logical, whether to drop empty dimensions of the returned data</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data, multi-dimensional array. The brain imaging data, one value per voxel. The data type and the dimensions depend on the data in the file, they are read from the header. If the parameter flatten is `TRUE`, a numeric vector is returned instead. Note: The return value changes if the parameter with_header is `TRUE`, see parameter description.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>To derive more information from the header, see the `mghheader.*` functions, like <code><a href='mghheader.vox2ras.tkreg.html'>mghheader.vox2ras.tkreg</a></code>.</p>
<p>Other morphometry functions: 
<code><a href='fs.get.morph.file.ext.for.format.html'>fs.get.morph.file.ext.for.format</a>()</code>,
<code><a href='fs.get.morph.file.format.from.filename.html'>fs.get.morph.file.format.from.filename</a>()</code>,
<code><a href='read.fs.curv.html'>read.fs.curv</a>()</code>,
<code><a href='read.fs.morph.gii.html'>read.fs.morph.gii</a>()</code>,
<code><a href='read.fs.morph.html'>read.fs.morph</a>()</code>,
<code><a href='read.fs.volume.html'>read.fs.volume</a>()</code>,
<code><a href='read.fs.weight.html'>read.fs.weight</a>()</code>,
<code><a href='write.fs.curv.html'>write.fs.curv</a>()</code>,
<code><a href='write.fs.label.gii.html'>write.fs.label.gii</a>()</code>,
<code><a href='write.fs.mgh.html'>write.fs.mgh</a>()</code>,
<code><a href='write.fs.morph.asc.html'>write.fs.morph.asc</a>()</code>,
<code><a href='write.fs.morph.gii.html'>write.fs.morph.gii</a>()</code>,
<code><a href='write.fs.morph.ni1.html'>write.fs.morph.ni1</a>()</code>,
<code><a href='write.fs.morph.ni2.html'>write.fs.morph.ni2</a>()</code>,
<code><a href='write.fs.morph.smp.html'>write.fs.morph.smp</a>()</code>,
<code><a href='write.fs.morph.txt.html'>write.fs.morph.txt</a>()</code>,
<code><a href='write.fs.morph.html'>write.fs.morph</a>()</code>,
<code><a href='write.fs.weight.asc.html'>write.fs.weight.asc</a>()</code>,
<code><a href='write.fs.weight.html'>write.fs.weight</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'>    <span class='va'>brain_image</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"brain.mgz"</span>,</span>
<span class='r-in'>                               package <span class='op'>=</span> <span class='st'>"freesurferformats"</span>,</span>
<span class='r-in'>                               mustWork <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>;</span>
<span class='r-in'>    <span class='va'>vd</span> <span class='op'>=</span> <span class='fu'>read.fs.mgh</span><span class='op'>(</span><span class='va'>brain_image</span><span class='op'>)</span>;</span>
<span class='r-in'>    <span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sprintf.html'>sprintf</a></span><span class='op'>(</span><span class='st'>"Read voxel data with dimensions %s. Values: min=%d, mean=%f, max=%d.\n"</span>,</span>
<span class='r-in'>                 <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>vd</span><span class='op'>)</span>, collapse <span class='op'>=</span> <span class='st'>' '</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>vd</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>vd</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>vd</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>;</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Read voxel data with dimensions 256 256 256 1. Values: min=0, mean=7.214277, max=156.</span>
<span class='r-in'>    <span class='co'># Read it again with full header data:</span></span>
<span class='r-in'>    <span class='va'>vdh</span> <span class='op'>=</span> <span class='fu'>read.fs.mgh</span><span class='op'>(</span><span class='va'>brain_image</span>, with_header <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>;</span>
<span class='r-in'>    <span class='co'># Use the vox2ras matrix from the header to compute RAS coordinates at CRS voxel (0, 0, 0):</span></span>
<span class='r-in'>    <span class='va'>vdh</span><span class='op'>$</span><span class='va'>header</span><span class='op'>$</span><span class='va'>vox2ras_matrix</span> <span class='op'><a href='https://rdrr.io/r/base/matmult.html'>%*%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span>;</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>           [,1]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1,] 127.50005</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [2,] -98.62726</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [3,]  79.09527</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [4,]   1.00000</span>
<span class='r-in'></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Tim Sch<c3><a4>fer.</a4></c3></p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


